+ source /root/mugen/libs/locallibs/common_lib.sh
++ python3 --version
++ '[' 0 -eq 0 ']'
++ source /root/mugen/libs/locallibs/common_lib_python.sh
+ main
++ type -t post_test
+ '[' -n function ']'
+ trap post_test EXIT INT HUP TERM
+ rpm -qa
+ grep expect
++ type -t config_params
+ '[' -n '' ']'
++ type -t pre_test
+ '[' -n function ']'
+ pre_test
+ LOG_INFO 'Start to prepare the test environment.'
+ message='Start to prepare the test environment.'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level info --message 'Start to prepare the test environment.'
Sun Jun 25 12:35:19 2023 - INFO  - Start to prepare the test environment.
+ DNF_INSTALL 'meson tar gcc git'
+ pkgs='meson tar gcc git'
+ node=1
+ '[' -z '' ']'
+ tmpfile=
++ python3 /root/mugen/libs/locallibs/rpm_manage.py install --pkgs 'meson tar gcc git' --node 1 --tempfile ''
+ tmpfile2=/tmp/tmpz66c689x
+ '[' -z '' ']'
+ tmpfile=/tmp/tmpz66c689x
+ cd common/0.63/
+ tar -xvf soname.tgz
1 soname/
1 soname/versioned.c
1 soname/main.c
1 soname/meson.build
1 soname/builddir/
1 soname/builddir/libsettosame.so.7.8.9.p/
1 soname/builddir/meson-info/
1 soname/builddir/meson-info/intro-benchmarks.json
1 soname/builddir/meson-info/intro-buildsystem_files.json
1 soname/builddir/meson-info/intro-dependencies.json
1 soname/builddir/meson-info/intro-installed.json
1 soname/builddir/meson-info/intro-buildoptions.json
1 soname/builddir/meson-info/intro-tests.json
1 soname/builddir/meson-info/meson-info.json
1 soname/builddir/meson-info/intro-projectinfo.json
1 soname/builddir/meson-info/intro-install_plan.json
1 soname/builddir/meson-info/intro-targets.json
1 soname/builddir/meson-dist/
1 soname/builddir/meson-dist/vertest-undefined.tar.xz
1 soname/builddir/meson-dist/vertest-undefined.tar.xz.sha256sum
1 soname/builddir/libverset.so.4.5.6.p/
1 soname/builddir/.gitignore
1 soname/builddir/libsome_module.so.p/
1 soname/builddir/libsoverset.so.1.2.3.p/
1 soname/builddir/main2.p/
1 soname/builddir/libverset.so.4
1 soname/builddir/compile_commands.json
1 soname/builddir/libsettosame.so
1 soname/builddir/libbothset.so
1 soname/builddir/libbothset.so.1.2.3
1 soname/builddir/meson-logs/
1 soname/builddir/meson-logs/meson-log.txt
1 soname/builddir/meson-private/
1 soname/builddir/meson-private/sanitycheckc.c
1 soname/builddir/meson-private/install.dat
1 soname/builddir/meson-private/meson_benchmark_setup.dat
1 soname/builddir/meson-private/sanitycheckc.exe
1 soname/builddir/meson-private/meson.lock
1 soname/builddir/meson-private/coredata.dat
1 soname/builddir/meson-private/cmd_line.txt
1 soname/builddir/meson-private/build.dat
1 soname/builddir/meson-private/meson_test_setup.dat
1 soname/builddir/liblinked_module2.so.p/
1 soname/builddir/build.ninja
1 soname/builddir/libverset.so
1 soname/builddir/liblinked_module1.so.p/
1 soname/builddir/libbothset.so.4.5.6.p/
1 soname/builddir/main1.p/
1 soname/builddir/.hgignore
1 soname/builddir/libnover.so.p/
1 soname/builddir/libsoverset.so
1 soname/.git/
1 soname/.git/logs/
1 soname/.git/logs/refs/
1 soname/.git/logs/refs/heads/
1 soname/.git/logs/refs/heads/master
1 soname/.git/logs/HEAD
1 soname/.git/refs/
1 soname/.git/refs/heads/
1 soname/.git/refs/heads/master
1 soname/.git/refs/tags/
1 soname/.git/objects/
1 soname/.git/objects/c4/
1 soname/.git/objects/c4/f2e3eb93d8c11bcf90714c99b3fe7970d8d26f
1 soname/.git/objects/f4/
1 soname/.git/objects/f4/8d2b0b8870a8ce578ac8f3ad22880f219a02e6
1 soname/.git/objects/pack/
1 soname/.git/objects/23/
1 soname/.git/objects/23/239f3b5c5e1ca5a251606ab6eb26a92d58c282
1 soname/.git/objects/info/
1 soname/.git/objects/44/
1 soname/.git/objects/44/b003a6d7ebdf9911d033d819e111e868421710
1 soname/.git/objects/f5/
1 soname/.git/objects/f5/ccbb93615ddad3de1580104cc7bcad1b4021d6
1 soname/.git/objects/fd/
1 soname/.git/objects/fd/a26a942904b10e96c17b92901ab3fba8f31e22
1 soname/.git/index
1 soname/.git/branches/
1 soname/.git/info/
1 soname/.git/info/exclude
1 soname/.git/description
1 soname/.git/HEAD
1 soname/.git/COMMIT_EDITMSG
1 soname/.git/config
1 soname/.git/hooks/
1 soname/.git/hooks/commit-msg.sample
1 soname/.git/hooks/update.sample
1 soname/.git/hooks/pre-push.sample
1 soname/.git/hooks/fsmonitor-watchman.sample
1 soname/.git/hooks/pre-applypatch.sample
1 soname/.git/hooks/pre-rebase.sample
1 soname/.git/hooks/pre-receive.sample
1 soname/.git/hooks/post-update.sample
1 soname/.git/hooks/pre-commit.sample
1 soname/.git/hooks/applypatch-msg.sample
1 soname/.git/hooks/prepare-commit-msg.sample
1 soname/.git/hooks/push-to-checkout.sample
1 soname/.git/hooks/pre-merge-commit.sample
1 soname/CMakeLists.txt
+ cd '1 soname'
+ LOG_INFO 'End to prepare the test environment.'
+ message='End to prepare the test environment.'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level info --message 'End to prepare the test environment.'
Sun Jun 25 12:36:23 2023 - INFO  - End to prepare the test environment.
++ type -t run_test
+ '[' -n function ']'
+ run_test
+ LOG_INFO 'Start testing...'
+ message='Start testing...'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level info --message 'Start testing...'
Sun Jun 25 12:36:24 2023 - INFO  - Start testing...
+ meson setup --reconfigure builddir
WARNING: Regenerating configuration from scratch.
Reason: Coredata file '/root/mugen/testcases/cli-test/meson/common/0.63/1 soname/builddir/meson-private/coredata.dat' references functions or classes that don't exist. This probably means that it was generated with an old version of meson. Try running from the source directory meson setup /root/mugen/testcases/cli-test/meson/common/0.63/1 soname/builddir --wipe
The Meson build system
Version: 1.0.1
Source dir: /root/mugen/testcases/cli-test/meson/common/0.63/1 soname
Build dir: /root/mugen/testcases/cli-test/meson/common/0.63/1 soname/builddir
Build type: native build
Project name: vertest
Project version: undefined
C compiler for the host machine: cc (gcc 10.3.1 "cc (GCC) 10.3.1")
C linker for the host machine: cc ld.bfd 2.37
Host machine cpu family: riscv64
Host machine cpu: riscv64
DEPRECATION: target main1 links against shared module linked_module1, which is incorrect.
             This will be an error in the future, so please use shared_library() for linked_module1 instead.
             If shared_module() was used for linked_module1 because it has references to undefined symbols,
             use shared_libary() with `override_options: ['b_lundef=false']` instead.
DEPRECATION: target main2 links against shared module linked_module2, which is incorrect.
             This will be an error in the future, so please use shared_library() for linked_module2 instead.
             If shared_module() was used for linked_module2 because it has references to undefined symbols,
             use shared_libary() with `override_options: ['b_lundef=false']` instead.
Build targets in project: 10

Found ninja-1.11.1 at /usr/bin/ninja
+ meson dist --help
+ grep 'usage: meson'
usage: meson dist [-h] [-C WD] [--allow-dirty] [--formats FORMATS]
+ CHECK_RESULT 0 0 0 'meson-dist --help failed'
+ actual_result=0
+ expect_result=0
+ mode=0
+ error_log='meson-dist --help failed'
+ exit_mode=0
+ '[' -z 0 ']'
+ '[' 0 -eq 0 ']'
+ test 0x '!=' 0x
+ return 0
+ meson dist -h
+ grep 'usage: meson'
usage: meson dist [-h] [-C WD] [--allow-dirty] [--formats FORMATS]
+ CHECK_RESULT 0 0 0 'meson-dist -h failed'
+ actual_result=0
+ expect_result=0
+ mode=0
+ error_log='meson-dist -h failed'
+ exit_mode=0
+ '[' -z 0 ']'
+ '[' 0 -eq 0 ']'
+ test 0x '!=' 0x
+ return 0
+ git add builddir CMakeLists.txt main.c meson.build versioned.c
+ git commit -m test
Author identity unknown

*** Please tell me who you are.

Run

  git config --global user.email "you@example.com"
  git config --global user.name "Your Name"

to set your account's default identity.
Omit --global to set the identity only in this repository.

fatal: unable to auto-detect email address (got 'root@openeuler-riscv64.(none)')
+ grep Installing
+ meson dist -C builddir
[0/1] Installing files.
Installing libnover.so to /root/mugen/testcases/cli-test/meson/common/0.63/1 soname/builddir/meson-private/dist-install/usr/local/lib64
Installing libverset.so.4.5.6 to /root/mugen/testcases/cli-test/meson/common/0.63/1 soname/builddir/meson-private/dist-install/usr/local/lib64
Installing libsoverset.so.1.2.3 to /root/mugen/testcases/cli-test/meson/common/0.63/1 soname/builddir/meson-private/dist-install/usr/local/lib64
Installing libbothset.so.4.5.6 to /root/mugen/testcases/cli-test/meson/common/0.63/1 soname/builddir/meson-private/dist-install/usr/local/lib64
Installing libsettosame.so.7.8.9 to /root/mugen/testcases/cli-test/meson/common/0.63/1 soname/builddir/meson-private/dist-install/usr/local/lib64
Installing libsome_module.so to /root/mugen/testcases/cli-test/meson/common/0.63/1 soname/builddir/meson-private/dist-install/usr/local/lib64
Installing liblinked_module1.so to /root/mugen/testcases/cli-test/meson/common/0.63/1 soname/builddir/meson-private/dist-install/usr/local/lib64
Installing liblinked_module2.so to /root/mugen/testcases/cli-test/meson/common/0.63/1 soname/builddir/meson-private/dist-install/usr/local/lib64
Installing symlink pointing to libverset.so.4.5.6 to /root/mugen/testcases/cli-test/meson/common/0.63/1 soname/builddir/meson-private/dist-install/usr/local/lib64/libverset.so.4
Installing symlink pointing to libverset.so.4 to /root/mugen/testcases/cli-test/meson/common/0.63/1 soname/builddir/meson-private/dist-install/usr/local/lib64/libverset.so
Installing symlink pointing to libsoverset.so.1.2.3 to /root/mugen/testcases/cli-test/meson/common/0.63/1 soname/builddir/meson-private/dist-install/usr/local/lib64/libsoverset.so
Installing symlink pointing to libbothset.so.4.5.6 to /root/mugen/testcases/cli-test/meson/common/0.63/1 soname/builddir/meson-private/dist-install/usr/local/lib64/libbothset.so.1.2.3
Installing symlink pointing to libbothset.so.1.2.3 to /root/mugen/testcases/cli-test/meson/common/0.63/1 soname/builddir/meson-private/dist-install/usr/local/lib64/libbothset.so
Installing symlink pointing to libsettosame.so.7.8.9 to /root/mugen/testcases/cli-test/meson/common/0.63/1 soname/builddir/meson-private/dist-install/usr/local/lib64/libsettosame.so
+ CHECK_RESULT 0 0 0 'meson-dist --C failed'
+ actual_result=0
+ expect_result=0
+ mode=0
+ error_log='meson-dist --C failed'
+ exit_mode=0
+ '[' -z 0 ']'
+ '[' 0 -eq 0 ']'
+ test 0x '!=' 0x
+ return 0
+ grep 'Running all tests'
+ meson dist -C builddir --formats xztar
[0/1] Running all tests.
+ CHECK_RESULT 0 0 0 'meson-dist --formats FORMATS failed'
+ actual_result=0
+ expect_result=0
+ mode=0
+ error_log='meson-dist --formats FORMATS failed'
+ exit_mode=0
+ '[' -z 0 ']'
+ '[' 0 -eq 0 ']'
+ test 0x '!=' 0x
+ return 0
+ meson dist -C builddir --include-subprojects
+ grep 'Linking target'
[7/22] Linking target libsoverset.so.1.2.3
[8/22] Linking target libverset.so.4.5.6
[9/22] Linking target libnover.so
[10/22] Linking target libsettosame.so.7.8.9
[11/22] Linking target libbothset.so.4.5.6
[12/22] Linking target libsome_module.so
[17/22] Linking target liblinked_module1.so
[18/22] Linking target liblinked_module2.so
[21/22] Linking target main1
[22/22] Linking target main2
+ CHECK_RESULT 0 0 0 'meson-dist --include-subprojects failed'
+ actual_result=0
+ expect_result=0
+ mode=0
+ error_log='meson-dist --include-subprojects failed'
+ exit_mode=0
+ '[' -z 0 ']'
+ '[' 0 -eq 0 ']'
+ test 0x '!=' 0x
+ return 0
+ meson dist -C builddir --no-tests
+ grep Created
Created /root/mugen/testcases/cli-test/meson/common/0.63/1 soname/builddir/meson-dist/vertest-undefined.tar.xz
+ CHECK_RESULT 0 0 0 'meson-dist --no-tests failed'
+ actual_result=0
+ expect_result=0
+ mode=0
+ error_log='meson-dist --no-tests failed'
+ exit_mode=0
+ '[' -z 0 ']'
+ '[' 0 -eq 0 ']'
+ test 0x '!=' 0x
+ return 0
+ LOG_INFO 'Finish test!'
+ message='Finish test!'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level info --message 'Finish test!'
Sun Jun 25 12:39:08 2023 - INFO  - Finish test!
+ CASE_RESULT 0
+ case_re=0
+ test -z ''
+ test 0 -eq 0
+ LOG_INFO 'succeed to execute the case.'
+ message='succeed to execute the case.'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level info --message 'succeed to execute the case.'
Sun Jun 25 12:39:09 2023 - INFO  - succeed to execute the case.
+ exec_result=
+ exit 0
+ post_test
+ LOG_INFO 'Start to restore the test environment.'
+ message='Start to restore the test environment.'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level info --message 'Start to restore the test environment.'
Sun Jun 25 12:39:10 2023 - INFO  - Start to restore the test environment.
+ DNF_REMOVE
+ node=1
+ pkg_list=
+ mode=0
+ [[ -z /tmp/tmpz66c689x ]]
+ '[' 0 -ne 0 ']'
+ '[' 1 == 0 ']'
+ python3 /root/mugen/libs/locallibs/rpm_manage.py remove --node 1 --pkgs '' --tempfile /tmp/tmpz66c689x
+ '[' 0 -ne 0 ']'
+ rm -rf '../1 soname'
+ LOG_INFO 'End to restore the test environment.'
+ message='End to restore the test environment.'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level info --message 'End to restore the test environment.'
Sun Jun 25 12:39:29 2023 - INFO  - End to restore the test environment.
