+ source /root/mugen/libs/locallibs/common_lib.sh
++ python3 --version
++ '[' 0 -eq 0 ']'
++ source /root/mugen/libs/locallibs/common_lib_python.sh
+ main
++ type -t post_test
+ '[' -n function ']'
+ trap post_test EXIT INT HUP TERM
+ rpm -qa
+ grep expect
++ type -t config_params
+ '[' -n '' ']'
++ type -t pre_test
+ '[' -n function ']'
+ pre_test
+ LOG_INFO 'Start to prepare the test environment.'
+ message='Start to prepare the test environment.'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level info --message 'Start to prepare the test environment.'
Wed Jun 28 14:15:06 2023 - INFO  - Start to prepare the test environment.
+ DNF_INSTALL whois
+ pkgs=whois
+ node=1
+ '[' -z '' ']'
+ tmpfile=
++ python3 /root/mugen/libs/locallibs/rpm_manage.py install --pkgs whois --node 1 --tempfile ''
+ tmpfile2=/tmp/tmp7rpdzd_3
+ '[' -z '' ']'
+ tmpfile=/tmp/tmp7rpdzd_3
+ LOG_INFO 'End to prepare the test environment.'
+ message='End to prepare the test environment.'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level info --message 'End to prepare the test environment.'
Wed Jun 28 14:15:08 2023 - INFO  - End to prepare the test environment.
++ type -t run_test
+ '[' -n function ']'
+ run_test
+ LOG_INFO 'Start to run test.'
+ message='Start to run test.'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level info --message 'Start to run test.'
Wed Jun 28 14:15:08 2023 - INFO  - Start to run test.
+ whois -h whois.apnic.net -K bai
+ grep inetnum:
inetnum:        103.2.52.0 - 103.2.52.255
inetnum:        103.2.53.0 - 103.2.53.255
inetnum:        111.67.160.0 - 111.67.160.255
inetnum:        111.67.161.0 - 111.67.161.255
inetnum:        111.67.162.0 - 111.67.162.255
inetnum:        111.67.163.0 - 111.67.163.255
inetnum:        111.67.164.0 - 111.67.164.255
inetnum:        111.67.165.0 - 111.67.165.255
inetnum:        111.67.166.0 - 111.67.166.255
inetnum:        111.67.167.0 - 111.67.167.255
inetnum:        111.67.168.0 - 111.67.168.255
inetnum:        111.67.169.0 - 111.67.169.255
inetnum:        111.67.170.0 - 111.67.170.255
inetnum:        111.67.171.0 - 111.67.171.255
inetnum:        119.63.160.0 - 119.63.167.255
inetnum:        119.63.168.0 - 119.63.168.255
inetnum:        119.63.169.0 - 119.63.169.255
inetnum:        119.63.170.0 - 119.63.170.255
inetnum:        119.63.171.0 - 119.63.171.255
inetnum:        119.63.172.0 - 119.63.172.255
inetnum:        119.63.173.0 - 119.63.173.255
inetnum:        119.63.174.0 - 119.63.174.255
inetnum:        119.63.175.0 - 119.63.175.255
inetnum:        119.63.176.0 - 119.63.176.255
inetnum:        119.63.177.0 - 119.63.177.255
inetnum:        119.63.178.0 - 119.63.178.255
inetnum:        119.63.179.0 - 119.63.179.255
inetnum:        119.63.180.0 - 119.63.180.255
inetnum:        119.63.181.0 - 119.63.181.255
inetnum:        119.63.182.0 - 119.63.182.255
inetnum:        119.63.183.0 - 119.63.183.255
inetnum:        119.63.184.0 - 119.63.184.255
inetnum:        119.63.185.0 - 119.63.185.255
inetnum:        119.63.186.0 - 119.63.186.255
inetnum:        119.63.187.0 - 119.63.187.255
inetnum:        119.63.188.0 - 119.63.188.255
inetnum:        119.63.189.0 - 119.63.189.255
inetnum:        119.63.190.0 - 119.63.190.255
inetnum:        119.63.191.0 - 119.63.191.255
inetnum:        203.133.192.0 - 203.133.199.255
inetnum:        203.133.200.0 - 203.133.203.255
inetnum:        203.133.204.0 - 203.133.207.255
inetnum:        203.133.208.0 - 203.133.215.255
inetnum:        203.133.216.0 - 203.133.219.255
inetnum:        203.133.220.0 - 203.133.223.255
inetnum:        203.133.224.0 - 203.133.227.255
inetnum:        203.133.228.0 - 203.133.229.255
inetnum:        203.133.230.0 - 203.133.231.255
inetnum:        203.133.232.0 - 203.133.232.255
inetnum:        203.133.233.0 - 203.133.233.255
inetnum:        203.133.234.0 - 203.133.234.255
inetnum:        203.133.235.0 - 203.133.235.255
inetnum:        203.133.236.0 - 203.133.239.255
inetnum:        203.202.192.0 - 203.202.199.255
inetnum:        203.202.200.0 - 203.202.207.255
inetnum:        203.202.208.0 - 203.202.215.255
inetnum:        203.202.216.0 - 203.202.216.255
inetnum:        203.202.217.0 - 203.202.217.255
inetnum:        203.202.218.0 - 203.202.218.255
inetnum:        203.202.219.0 - 203.202.219.255
inetnum:        203.202.220.0 - 203.202.220.255
inetnum:        203.202.221.0 - 203.202.221.255
inetnum:        203.202.222.0 - 203.202.222.255
inetnum:        210.1.160.0 - 210.1.160.255
inetnum:        210.1.161.0 - 210.1.161.255
inetnum:        210.1.162.0 - 210.1.163.255
inetnum:        210.1.164.0 - 210.1.167.255
inetnum:        210.1.168.0 - 210.1.175.255
inetnum:        210.1.176.0 - 210.1.183.255
inetnum:        210.1.184.0 - 210.1.187.255
inetnum:        210.1.188.0 - 210.1.189.255
inetnum:        210.1.190.0 - 210.1.191.255
+ CHECK_RESULT 0 0 0 'test whois -K failed'
+ actual_result=0
+ expect_result=0
+ mode=0
+ error_log='test whois -K failed'
+ exit_mode=0
+ '[' -z 0 ']'
+ '[' 0 -eq 0 ']'
+ test 0x '!=' 0x
+ return 0
+ whois -r baidu
+ grep 'org-name:       Baidu'
org-name:       Baidu (Hong Kong) Limited
+ CHECK_RESULT 0 0 0 'test whois -r failed'
+ actual_result=0
+ expect_result=0
+ mode=0
+ error_log='test whois -r failed'
+ exit_mode=0
+ '[' -z 0 ']'
+ '[' 0 -eq 0 ']'
+ test 0x '!=' 0x
+ return 0
+ whois -R baidu
% This is the RIPE Database query service.
% The objects are in RPSL format.
%
% The RIPE Database is subject to Terms and Conditions.
% See http://www.ripe.net/db/support/db-terms-conditions.pdf

%ERROR:111: invalid option supplied
%
% Use help query to see the valid options.

% This query was served by the RIPE Database Query Service version 1.107 (ABERDEEN)


+ CHECK_RESULT 0 0 0 'test whois -R failed'
+ actual_result=0
+ expect_result=0
+ mode=0
+ error_log='test whois -R failed'
+ exit_mode=0
+ '[' -z 0 ']'
+ '[' 0 -eq 0 ']'
+ test 0x '!=' 0x
+ return 0
+ whois -a baidu
+ grep netname:
netname:        Baidu
netname:        Baidu
netname:        Baidu
netname:        Baidu
netname:        Baidu
netname:        Baidu
netname:        Baidu
netname:        Baidu
netname:        Baidu
netname:        Baidu
netname:        Baidu
netname:        Baidu
netname:        Baidu
netname:        Baidu
netname:        Baidu
netname:        Baidu
netname:        Baidu
netname:        Baidu
netname:        Baidu
netname:        Baidu
netname:        Baidu
netname:        Baidu
netname:        Baidu
netname:        Baidu
netname:        Baidu
netname:        Baidu
netname:        Baidu
netname:        Baidu
netname:        Baidu
netname:        Baidu
netname:        Baidu
netname:        Baidu
netname:        Baidu
netname:        Baidu
netname:        baidu
netname:        baidu
netname:        Baidu
netname:        Baidu
netname:        Baidu
netname:        Baidu
netname:        Baidu
netname:        Baidu
netname:        Baidu
netname:        Baidu
netname:        Baidu
netname:        baidu
netname:        Baidu
netname:        Baidu
netname:        Baidu
netname:        Baidu
netname:        Baidu
netname:        Baidu
netname:        Baidu
netname:        BAIDU
netname:        BAIDU
netname:        BAIDU
+ CHECK_RESULT 0 0 0 'test whois -a failed'
+ actual_result=0
+ expect_result=0
+ mode=0
+ error_log='test whois -a failed'
+ exit_mode=0
+ '[' -z 0 ']'
+ '[' 0 -eq 0 ']'
+ test 0x '!=' 0x
+ return 0
+ whois -s RIPE-GRS baidu
+ grep 'source:         RIPE-GRS'
source:         RIPE-GRS
+ CHECK_RESULT 0 0 0 'test whois -s failed'
+ actual_result=0
+ expect_result=0
+ mode=0
+ error_log='test whois -s failed'
+ exit_mode=0
+ '[' -z 0 ']'
+ '[' 0 -eq 0 ']'
+ test 0x '!=' 0x
+ return 0
+ whois -h whois.apnic.net -T domain -i mb APNIC-HM -g RIPE:3:N:0-0
% [whois.apnic.net]
% Whois data copyright terms    http://www.apnic.net/db/dbcopyright.html

%ERROR:111: invalid option supplied
%
% Use help query to see the valid options.

% This query was served by the APNIC Whois Service version 1.88.16 (WHOIS-AU2)


+ CHECK_RESULT 0 0 0 'test whois -g failed'
+ actual_result=0
+ expect_result=0
+ mode=0
+ error_log='test whois -g failed'
+ exit_mode=0
+ '[' -z 0 ']'
+ '[' 0 -eq 0 ']'
+ test 0x '!=' 0x
+ return 0
+ whois -t domain baidu
+ grep domain:
domain:         [mandatory]  [single]     [primary/lookup key]
+ CHECK_RESULT 0 0 0 'test whois -t failed'
+ actual_result=0
+ expect_result=0
+ mode=0
+ error_log='test whois -t failed'
+ exit_mode=0
+ '[' -z 0 ']'
+ '[' 0 -eq 0 ']'
+ test 0x '!=' 0x
+ return 0
+ whois -v domain baidu
+ grep 'A short decription related to the object'
+ CHECK_RESULT 1 0 0 'test whois -v failed'
+ actual_result=1
+ expect_result=0
+ mode=0
+ error_log='test whois -v failed'
+ exit_mode=0
+ '[' -z 1 ']'
+ '[' 0 -eq 0 ']'
+ test 1x '!=' 0x
+ test -n 'test whois -v failed'
+ LOG_ERROR 'test whois -v failed'
+ message='test whois -v failed'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level error --message 'test whois -v failed'
Wed Jun 28 14:15:20 2023 - ERROR - test whois -v failed
+ (( exec_result++ ))
+ LOG_ERROR 'oe_test_whois_03.sh line 45'
+ message='oe_test_whois_03.sh line 45'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level error --message 'oe_test_whois_03.sh line 45'
Wed Jun 28 14:15:20 2023 - ERROR - oe_test_whois_03.sh line 45
+ '[' 0 -eq 1 ']'
+ return 0
+ whois -q sources
+ grep RIPE:3:N:0-0
RIPE:3:N:0-0
+ CHECK_RESULT 0 0 0 'test whois -q failed'
+ actual_result=0
+ expect_result=0
+ mode=0
+ error_log='test whois -q failed'
+ exit_mode=0
+ '[' -z 0 ']'
+ '[' 0 -eq 0 ']'
+ test 0x '!=' 0x
+ return 0
+ LOG_INFO 'End to run test.'
+ message='End to run test.'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level info --message 'End to run test.'
Wed Jun 28 14:15:21 2023 - INFO  - End to run test.
+ CASE_RESULT 0
+ case_re=0
+ test -z 1
+ test 1 -gt 0
+ LOG_ERROR 'failed to execute the case.'
+ message='failed to execute the case.'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level error --message 'failed to execute the case.'
Wed Jun 28 14:15:21 2023 - ERROR - failed to execute the case.
+ exit 1
+ post_test
+ LOG_INFO 'Start to restore the test environment.'
+ message='Start to restore the test environment.'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level info --message 'Start to restore the test environment.'
Wed Jun 28 14:15:21 2023 - INFO  - Start to restore the test environment.
+ DNF_REMOVE
+ node=1
+ pkg_list=
+ mode=0
+ [[ -z /tmp/tmp7rpdzd_3 ]]
+ '[' 0 -ne 0 ']'
+ '[' 1 == 0 ']'
+ python3 /root/mugen/libs/locallibs/rpm_manage.py remove --node 1 --pkgs '' --tempfile /tmp/tmp7rpdzd_3
+ '[' 0 -ne 0 ']'
+ LOG_INFO 'End to restore the test environment.'
+ message='End to restore the test environment.'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level info --message 'End to restore the test environment.'
Wed Jun 28 14:15:22 2023 - INFO  - End to restore the test environment.
