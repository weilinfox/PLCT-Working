+ source /root/mugen/libs/locallibs/common_lib.sh
++ python3 --version
++ '[' 0 -eq 0 ']'
++ source /root/mugen/libs/locallibs/common_lib_python.sh
+ main
++ type -t post_test
+ '[' -n function ']'
+ trap post_test EXIT INT HUP TERM
+ rpm -qa
+ grep expect
++ type -t config_params
+ '[' -n '' ']'
++ type -t pre_test
+ '[' -n function ']'
+ pre_test
+ LOG_INFO 'Start to prepare the test environment.'
+ message='Start to prepare the test environment.'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level info --message 'Start to prepare the test environment.'
Wed Jun 28 14:22:08 2023 - INFO  - Start to prepare the test environment.
+ DNF_INSTALL 'jgit tar git'
+ pkgs='jgit tar git'
+ node=1
+ '[' -z '' ']'
+ tmpfile=
++ python3 /root/mugen/libs/locallibs/rpm_manage.py install --pkgs 'jgit tar git' --node 1 --tempfile ''
+ tmpfile2=/tmp/tmpinp_8brp
+ '[' -z '' ']'
+ tmpfile=/tmp/tmpinp_8brp
+ tar -xvf ./common/data.tar.gz
+++ dirname oe_test_jgit_03.sh
++ cd .
++ pwd
+ pojpath=/root/mugen/testcases/cli-test/jgit
+ mkdir /tmp/jgitdemo
+ pushd /tmp/jgitdemo
/tmp/jgitdemo ~/mugen/testcases/cli-test/jgit
+ jgit clone https://gitee.com/gittyee/demo.git
Cloning into 'demo'...
remote: Enumerating objects: 552remote: Enumerating objects: 552
Receiving objects:        0% (  1/552)Receiving objects:        1% (  6/552)Receiving objects:        2% ( 12/552)Receiving objects:        3% ( 17/552)Receiving objects:        4% ( 23/552)Receiving objects:        5% ( 28/552)Receiving objects:        6% ( 34/552)Receiving objects:        7% ( 39/552)Receiving objects:        8% ( 45/552)Receiving objects:        9% ( 50/552)Receiving objects:       10% ( 56/552)Receiving objects:       11% ( 61/552)Receiving objects:       12% ( 67/552)Receiving objects:       13% ( 72/552)Receiving objects:       14% ( 78/552)Receiving objects:       15% ( 83/552)Receiving objects:       16% ( 89/552)Receiving objects:       17% ( 94/552)Receiving objects:       18% (100/552)Receiving objects:       19% (105/552)Receiving objects:       20% (111/552)Receiving objects:       21% (116/552)Receiving objects:       22% (122/552)Receiving objects:       23% (127/552)Receiving objects:       24% (133/552)Receiving objects:       25% (138/552)Receiving objects:       26% (144/552)Receiving objects:       27% (150/552)Receiving objects:       28% (155/552)Receiving objects:       29% (161/552)Receiving objects:       30% (166/552)Receiving objects:       31% (172/552)Receiving objects:       32% (177/552)Receiving objects:       33% (183/552)Receiving objects:       34% (188/552)Receiving objects:       35% (194/552)Receiving objects:       36% (199/552)Receiving objects:       37% (205/552)Receiving objects:       38% (210/552)Receiving objects:       39% (216/552)Receiving objects:       40% (221/552)Receiving objects:       41% (227/552)Receiving objects:       42% (232/552)Receiving objects:       43% (238/552)Receiving objects:       44% (243/552)Receiving objects:       45% (249/552)Receiving objects:       46% (254/552)Receiving objects:       47% (260/552)Receiving objects:       48% (265/552)Receiving objects:       49% (271/552)Receiving objects:       50% (276/552)Receiving objects:       51% (282/552)Receiving objects:       51% (283/552)Receiving objects:       51% (284/552)Receiving objects:       51% (285/552)Receiving objects:       52% (288/552)Receiving objects:       53% (293/552)Receiving objects:       54% (299/552)Receiving objects:       55% (304/552)Receiving objects:       56% (310/552)Receiving objects:       57% (315/552)Receiving objects:       58% (321/552)Receiving objects:       59% (326/552)Receiving objects:       60% (332/552)Receiving objects:       61% (337/552)Receiving objects:       62% (343/552)Receiving objects:       63% (348/552)Receiving objects:       63% (352/552)Receiving objects:       64% (354/552)Receiving objects:       65% (359/552)Receiving objects:       66% (365/552)Receiving objects:       67% (370/552)Receiving objects:       68% (376/552)Receiving objects:       69% (381/552)Receiving objects:       70% (387/552)Receiving objects:       71% (392/552)Receiving objects:       72% (398/552)Receiving objects:       73% (403/552)Receiving objects:       74% (409/552)Receiving objects:       75% (414/552)Receiving objects:       76% (420/552)Receiving objects:       77% (426/552)Receiving objects:       77% (430/552)Receiving objects:       78% (431/552)Receiving objects:       78% (432/552)Receiving objects:       79% (437/552)Receiving objects:       79% (438/552)Receiving objects:       80% (442/552)Receiving objects:       81% (448/552)Receiving objects:       82% (453/552)Receiving objects:       83% (459/552)Receiving objects:       84% (464/552)Receiving objects:       85% (470/552)Receiving objects:       86% (475/552)Receiving objects:       87% (481/552)Receiving objects:       88% (486/552)Receiving objects:       89% (492/552)Receiving objects:       90% (497/552)Receiving objects:       91% (503/552)Receiving objects:       92% (508/552)Receiving objects:       93% (514/552)Receiving objects:       94% (519/552)Receiving objects:       95% (525/552)Receiving objects:       96% (530/552)Receiving objects:       97% (536/552)Receiving objects:       98% (541/552)Receiving objects:       99% (547/552)Receiving objects:      100% (552/552)Receiving objects:      100% (552/552)
Resolving deltas:         1% (  3/237)Resolving deltas:         2% (  5/237)Resolving deltas:         3% (  8/237)Resolving deltas:         4% ( 10/237)Resolving deltas:         5% ( 12/237)Resolving deltas:         6% ( 15/237)Resolving deltas:         7% ( 17/237)Resolving deltas:         8% ( 19/237)Resolving deltas:         9% ( 22/237)Resolving deltas:        10% ( 24/237)Resolving deltas:        11% ( 27/237)Resolving deltas:        12% ( 29/237)Resolving deltas:        13% ( 31/237)Resolving deltas:        14% ( 34/237)Resolving deltas:        15% ( 36/237)Resolving deltas:        16% ( 38/237)Resolving deltas:        17% ( 41/237)Resolving deltas:        18% ( 43/237)Resolving deltas:        19% ( 46/237)Resolving deltas:        20% ( 48/237)Resolving deltas:        21% ( 50/237)Resolving deltas:        22% ( 53/237)Resolving deltas:        23% ( 55/237)Resolving deltas:        24% ( 57/237)Resolving deltas:        25% ( 60/237)Resolving deltas:        26% ( 62/237)Resolving deltas:        27% ( 64/237)Resolving deltas:        28% ( 67/237)Resolving deltas:        29% ( 69/237)Resolving deltas:        30% ( 72/237)Resolving deltas:        31% ( 74/237)Resolving deltas:        32% ( 76/237)Resolving deltas:        33% ( 79/237)Resolving deltas:        34% ( 81/237)Resolving deltas:        35% ( 83/237)Resolving deltas:        36% ( 86/237)Resolving deltas:        37% ( 88/237)Resolving deltas:        38% ( 91/237)Resolving deltas:        39% ( 93/237)Resolving deltas:        40% ( 95/237)Resolving deltas:        41% ( 98/237)Resolving deltas:        42% (100/237)Resolving deltas:        43% (102/237)Resolving deltas:        44% (105/237)Resolving deltas:        45% (107/237)Resolving deltas:        46% (110/237)Resolving deltas:        47% (112/237)Resolving deltas:        48% (114/237)Resolving deltas:        49% (117/237)Resolving deltas:        50% (119/237)Resolving deltas:        51% (121/237)Resolving deltas:        52% (124/237)Resolving deltas:        53% (126/237)Resolving deltas:        54% (128/237)Resolving deltas:        55% (131/237)Resolving deltas:        56% (133/237)Resolving deltas:        57% (136/237)Resolving deltas:        58% (138/237)Resolving deltas:        59% (140/237)Resolving deltas:        60% (143/237)Resolving deltas:        61% (145/237)Resolving deltas:        62% (147/237)Resolving deltas:        63% (150/237)Resolving deltas:        64% (152/237)Resolving deltas:        65% (155/237)Resolving deltas:        66% (157/237)Resolving deltas:        67% (159/237)Resolving deltas:        68% (162/237)Resolving deltas:        69% (164/237)Resolving deltas:        70% (166/237)Resolving deltas:        71% (169/237)Resolving deltas:        72% (171/237)Resolving deltas:        73% (174/237)Resolving deltas:        74% (176/237)Resolving deltas:        75% (178/237)Resolving deltas:        76% (181/237)Resolving deltas:        77% (183/237)Resolving deltas:        78% (185/237)Resolving deltas:        79% (188/237)Resolving deltas:        80% (190/237)Resolving deltas:        81% (192/237)Resolving deltas:        82% (195/237)Resolving deltas:        83% (197/237)Resolving deltas:        84% (200/237)Resolving deltas:        85% (202/237)Resolving deltas:        86% (204/237)Resolving deltas:        87% (207/237)Resolving deltas:        88% (209/237)Resolving deltas:        89% (211/237)Resolving deltas:        90% (214/237)Resolving deltas:        91% (216/237)Resolving deltas:        92% (219/237)Resolving deltas:        93% (221/237)Resolving deltas:        94% (223/237)Resolving deltas:        95% (226/237)Resolving deltas:        96% (228/237)Resolving deltas:        97% (230/237)Resolving deltas:        98% (233/237)Resolving deltas:        99% (235/237)Resolving deltas:       100% (237/237)Resolving deltas:       100% (237/237)
Checking out files:     100% (1/1)Checking out files:     100% (1/1)

+ pushd /tmp/jgitdemo/demo
/tmp/jgitdemo/demo /tmp/jgitdemo ~/mugen/testcases/cli-test/jgit
+ touch demo.txt
+ jgit add demo.txt
+ jgit commit -m 'test demo'
[master 39941961c3aed0ef8bf75b3849cdb7db6570c6b2] test demo
+ LOG_INFO 'End to prepare the test environment.'
+ message='End to prepare the test environment.'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level info --message 'End to prepare the test environment.'
Wed Jun 28 14:25:34 2023 - INFO  - End to prepare the test environment.
++ type -t run_test
+ '[' -n function ']'
+ run_test
+ LOG_INFO 'Start to run test.'
+ message='Start to run test.'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level info --message 'Start to run test.'
Wed Jun 28 14:25:34 2023 - INFO  - Start to run test.
+ pushd /tmp/jgitdemo/demo
/tmp/jgitdemo/demo /tmp/jgitdemo/demo /tmp/jgitdemo ~/mugen/testcases/cli-test/jgit
++ git log -n 2
++ grep commit
++ sed -n 2p
++ awk -F ' ' '{print $2}'
+ commitid=a9d8fca11296970cff875a4e57f679c7b7d2796c
+ jgit reset a9d8fca11296970cff875a4e57f679c7b7d2796c --soft
+ jgit log -n 1
+ grep 'add README.md'
    add README.md.
+ CHECK_RESULT 0 0 0 'Check jgit reset failed'
+ actual_result=0
+ expect_result=0
+ mode=0
+ error_log='Check jgit reset failed'
+ exit_mode=0
+ '[' -z 0 ']'
+ '[' 0 -eq 0 ']'
+ test 0x '!=' 0x
+ return 0
+ jgit rm demo.txt
+ test -f demo.txt
+ CHECK_RESULT 1 1 0 'Check jgit rm failed'
+ actual_result=1
+ expect_result=1
+ mode=0
+ error_log='Check jgit rm failed'
+ exit_mode=0
+ '[' -z 1 ']'
+ '[' 0 -eq 0 ']'
+ test 1x '!=' 1x
+ return 0
+ jgit show
+ grep 'add README.md'
    add README.md.
+ CHECK_RESULT 0 0 0 'Check jgit show failed'
+ actual_result=0
+ expect_result=0
+ mode=0
+ error_log='Check jgit show failed'
+ exit_mode=0
+ '[' -z 0 ']'
+ '[' 0 -eq 0 ']'
+ test 0x '!=' 0x
+ return 0
+ touch aaa.txt
+ jgit status
+ grep -e 'Untracked files:'
Untracked files:
+ CHECK_RESULT 0 0 0 'Check jgit status failed'
+ actual_result=0
+ expect_result=0
+ mode=0
+ error_log='Check jgit status failed'
+ exit_mode=0
+ '[' -z 0 ']'
+ '[' 0 -eq 0 ']'
+ test 0x '!=' 0x
+ return 0
+ jgit tag testtag -m 'test tag'
+ jgit tag
+ grep testtag
testtag
+ CHECK_RESULT 0 0 0 'Check jgit tag failed'
+ actual_result=0
+ expect_result=0
+ mode=0
+ error_log='Check jgit tag failed'
+ exit_mode=0
+ '[' -z 0 ']'
+ '[' 0 -eq 0 ']'
+ test 0x '!=' 0x
+ return 0
+ jgit version
+ grep 'jgit version'
jgit version 5.11.0.202103091610-r
+ CHECK_RESULT 0 0 0 'Check jgit version failed'
+ actual_result=0
+ expect_result=0
+ mode=0
+ error_log='Check jgit version failed'
+ exit_mode=0
+ '[' -z 0 ']'
+ '[' 0 -eq 0 ']'
+ test 0x '!=' 0x
+ return 0
+ pushd /root/mugen/testcases/cli-test/jgit
~/mugen/testcases/cli-test/jgit /tmp/jgitdemo/demo /tmp/jgitdemo/demo /tmp/jgitdemo ~/mugen/testcases/cli-test/jgit
+ cp ./data/manifest.xml .
+ jgit repo manifest.xml
+ CHECK_RESULT 0 0 0 'Check jgit repo failed'
+ actual_result=0
+ expect_result=0
+ mode=0
+ error_log='Check jgit repo failed'
+ exit_mode=0
+ '[' -z 0 ']'
+ '[' 0 -eq 0 ']'
+ test 0x '!=' 0x
+ return 0
+ popd
/tmp/jgitdemo/demo /tmp/jgitdemo/demo /tmp/jgitdemo ~/mugen/testcases/cli-test/jgit
+ LOG_INFO 'End to run test.'
+ message='End to run test.'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level info --message 'End to run test.'
Wed Jun 28 14:25:37 2023 - INFO  - End to run test.
+ CASE_RESULT 0
+ case_re=0
+ test -z ''
+ test 0 -eq 0
+ LOG_INFO 'succeed to execute the case.'
+ message='succeed to execute the case.'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level info --message 'succeed to execute the case.'
Wed Jun 28 14:25:37 2023 - INFO  - succeed to execute the case.
+ exec_result=
+ exit 0
+ post_test
+ LOG_INFO 'Start to restore the test environment.'
+ message='Start to restore the test environment.'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level info --message 'Start to restore the test environment.'
Wed Jun 28 14:25:37 2023 - INFO  - Start to restore the test environment.
+ DNF_REMOVE
+ node=1
+ pkg_list=
+ mode=0
+ [[ -z /tmp/tmpinp_8brp ]]
+ '[' 0 -ne 0 ']'
+ '[' 1 == 0 ']'
+ python3 /root/mugen/libs/locallibs/rpm_manage.py remove --node 1 --pkgs '' --tempfile /tmp/tmpinp_8brp
+ '[' 0 -ne 0 ']'
+ rm -rf /tmp/jgitdemo /root/mugen/testcases/cli-test/jgit/data/ /root/mugen/testcases/cli-test/jgit/lib/ /root/mugen/testcases/cli-test/jgit/manifest.xml
+ LOG_INFO 'End to restore the test environment.'
+ message='End to restore the test environment.'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level info --message 'End to restore the test environment.'
Wed Jun 28 14:25:50 2023 - INFO  - End to restore the test environment.
