+ source common/common_osc.sh
++ source /root/mugen/libs/locallibs/common_lib.sh
+++ python3 --version
+++ '[' 0 -eq 0 ']'
+++ source /root/mugen/libs/locallibs/common_lib_python.sh
+ main
++ type -t post_test
+ '[' -n function ']'
+ trap post_test EXIT INT HUP TERM
+ rpm -qa
+ grep expect
++ type -t config_params
+ '[' -n function ']'
+ config_params
+ LOG_INFO 'Start to config params of the case.'
+ message='Start to config params of the case.'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level info --message 'Start to config params of the case.'
Thu May 25 17:01:20 2023 - INFO  - Start to config params of the case.
+ deploy_env
+ cat
+ branches_path=home:test666:branches:openEuler:Mainline
+++ dirname oe_test_osc_06.sh
++ cd .
++ pwd
+ currentDir=/root/mugen/testcases/cli-test/osc
+ LOG_INFO 'End to config params of the case.'
+ message='End to config params of the case.'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level info --message 'End to config params of the case.'
Thu May 25 17:01:20 2023 - INFO  - End to config params of the case.
++ type -t pre_test
+ '[' -n function ']'
+ pre_test
+ LOG_INFO 'Start to prepare the test environment.'
+ message='Start to prepare the test environment.'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level info --message 'Start to prepare the test environment.'
Thu May 25 17:01:20 2023 - INFO  - Start to prepare the test environment.
+ DNF_INSTALL osc
+ pkgs=osc
+ node=1
+ '[' -z '' ']'
+ tmpfile=
++ python3 /root/mugen/libs/locallibs/rpm_manage.py install --pkgs osc --node 1 --tempfile ''
+ tmpfile2=/tmp/tmpjg5lurb8
+ '[' -z '' ']'
+ tmpfile=/tmp/tmpjg5lurb8
+ osc checkout home:test666:branches:openEuler:Mainline
+ grep revision
WARNING: SSL certificate checks disabled. Connection is insecure!

At revision 6019.
+ cd home:test666:branches:openEuler:Mainline/zjl
+ LOG_INFO 'End to prepare the test environment.'
+ message='End to prepare the test environment.'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level info --message 'End to prepare the test environment.'
Thu May 25 17:01:43 2023 - INFO  - End to prepare the test environment.
++ type -t run_test
+ '[' -n function ']'
+ run_test
+ LOG_INFO 'Start to run test.'
+ message='Start to run test.'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level info --message 'Start to run test.'
Thu May 25 17:01:43 2023 - INFO  - Start to run test.
+ SLEEP_WAIT 3 'grep '\''add 1.txt'\'' osc.log' 2
+ wait_time=3
+ nohup osc log
+ cmd='grep '\''add 1.txt'\'' osc.log'
+ mode=2
+ python3 /root/mugen/libs/locallibs/sleep_wait.py --time 3 --cmd 'grep '\''add 1.txt'\'' osc.log' --mode 2
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
add 1.txt
+ CHECK_RESULT 0
+ actual_result=0
+ expect_result=0
+ mode=0
+ error_log=
+ exit_mode=0
+ '[' -z 0 ']'
+ '[' 0 -eq 0 ']'
+ test 0x '!=' 0x
+ return 0
+ osc info
+ grep 'Project name'
Project name: home:test666:branches:openEuler:Mainline
+ CHECK_RESULT 0
+ actual_result=0
+ expect_result=0
+ mode=0
+ error_log=
+ exit_mode=0
+ '[' -z 0 ']'
+ '[' 0 -eq 0 ']'
+ test 0x '!=' 0x
+ return 0
+ osc config section --dump-full
+ grep passx
passx = None
+ CHECK_RESULT 0
+ actual_result=0
+ expect_result=0
+ mode=0
+ error_log=
+ exit_mode=0
+ '[' -z 0 ']'
+ '[' 0 -eq 0 ']'
+ test 0x '!=' 0x
+ return 0
+ osc config section --dump
+ grep plaintext_passwd
plaintext_passwd = 0
+ CHECK_RESULT 0
+ actual_result=0
+ expect_result=0
+ mode=0
+ error_log=
+ exit_mode=0
+ '[' -z 0 ']'
+ '[' 0 -eq 0 ']'
+ test 0x '!=' 0x
+ return 0
+ osc clean .
+ grep 'Removing: osc.log'
Removing: osc.log
+ CHECK_RESULT 0
+ actual_result=0
+ expect_result=0
+ mode=0
+ error_log=
+ exit_mode=0
+ '[' -z 0 ']'
+ '[' 0 -eq 0 ']'
+ test 0x '!=' 0x
+ return 0
+ osc comment list package home:test666:branches:openEuler:Mainline zjl
WARNING: SSL certificate checks disabled. Connection is insecure!

+ CHECK_RESULT 0
+ actual_result=0
+ expect_result=0
+ mode=0
+ error_log=
+ exit_mode=0
+ '[' -z 0 ']'
+ '[' 0 -eq 0 ']'
+ test 0x '!=' 0x
+ return 0
+ touch 4.txt
+ osc add 4.txt last_file.txt
+ grep A
+ grep 4.txt
A    4.txt
+ CHECK_RESULT 0
+ actual_result=0
+ expect_result=0
+ mode=0
+ error_log=
+ exit_mode=0
+ '[' -z 0 ']'
+ '[' 0 -eq 0 ']'
+ test 0x '!=' 0x
+ return 0
+ osc commit -n
+ grep 'Committed revision'
WARNING: SSL certificate checks disabled. Connection is insecure!

Committed revision 6020.
+ CHECK_RESULT 0
+ actual_result=0
+ expect_result=0
+ mode=0
+ error_log=
+ exit_mode=0
+ '[' -z 0 ']'
+ '[' 0 -eq 0 ']'
+ test 0x '!=' 0x
+ return 0
+ echo 'good girl'
+ CHECK_RESULT 0
+ actual_result=0
+ expect_result=0
+ mode=0
+ error_log=
+ exit_mode=0
+ '[' -z 0 ']'
+ '[' 0 -eq 0 ']'
+ test 0x '!=' 0x
+ return 0
+ SLEEP_WAIT 3 'grep '\''good girl'\'' osc_diff.log' 2
+ wait_time=3
+ cmd='grep '\''good girl'\'' osc_diff.log'
+ nohup osc diff
+ mode=2
+ python3 /root/mugen/libs/locallibs/sleep_wait.py --time 3 --cmd 'grep '\''good girl'\'' osc_diff.log' --mode 2
+good girl
+ CHECK_RESULT 0
+ actual_result=0
+ expect_result=0
+ mode=0
+ error_log=
+ exit_mode=0
+ '[' -z 0 ']'
+ '[' 0 -eq 0 ']'
+ test 0x '!=' 0x
+ return 0
+ osc add 4.txt last_file.txt osc_diff.log
+ grep A
+ grep osc_diff.log
A    osc_diff.log
+ CHECK_RESULT 0
+ actual_result=0
+ expect_result=0
+ mode=0
+ error_log=
+ exit_mode=0
+ '[' -z 0 ']'
+ '[' 0 -eq 0 ']'
+ test 0x '!=' 0x
+ return 0
+ osc commit -n
+ grep 'Committed revision'
WARNING: SSL certificate checks disabled. Connection is insecure!

Committed revision 6021.
+ CHECK_RESULT 0
+ actual_result=0
+ expect_result=0
+ mode=0
+ error_log=
+ exit_mode=0
+ '[' -z 0 ']'
+ '[' 0 -eq 0 ']'
+ test 0x '!=' 0x
+ return 0
+ osc diff
+ CHECK_RESULT 0
+ actual_result=0
+ expect_result=0
+ mode=0
+ error_log=
+ exit_mode=0
+ '[' -z 0 ']'
+ '[' 0 -eq 0 ']'
+ test 0x '!=' 0x
+ return 0
+ expect
spawn osc rremove home:test666:branches:openEuler:Mainline zjl 4.txt
rm: remove source file `4.txt' from `home:test666:branches:openEuler:Mainline/zjl'? (yY|nN) y
WARNING: SSL certificate checks disabled. Connection is insecure!

+ CHECK_RESULT 0
+ actual_result=0
+ expect_result=0
+ mode=0
+ error_log=
+ exit_mode=0
+ '[' -z 0 ']'
+ '[' 0 -eq 0 ']'
+ test 0x '!=' 0x
+ return 0
+ expect
spawn osc rremove home:test666:branches:openEuler:Mainline zjl osc_diff.log
rm: remove source file `osc_diff.log' from `home:test666:branches:openEuler:Mainline/zjl'? (yY|nN) y
WARNING: SSL certificate checks disabled. Connection is insecure!

+ CHECK_RESULT 0
+ actual_result=0
+ expect_result=0
+ mode=0
+ error_log=
+ exit_mode=0
+ '[' -z 0 ']'
+ '[' 0 -eq 0 ']'
+ test 0x '!=' 0x
+ return 0
+ LOG_INFO 'End to run test.'
+ message='End to run test.'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level info --message 'End to run test.'
Thu May 25 17:02:28 2023 - INFO  - End to run test.
+ CASE_RESULT 0
+ case_re=0
+ test -z ''
+ test 0 -eq 0
+ LOG_INFO 'succeed to execute the case.'
+ message='succeed to execute the case.'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level info --message 'succeed to execute the case.'
Thu May 25 17:02:28 2023 - INFO  - succeed to execute the case.
+ exec_result=
+ exit 0
+ post_test
+ LOG_INFO 'Start to restore the test environment.'
+ message='Start to restore the test environment.'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level info --message 'Start to restore the test environment.'
Thu May 25 17:02:28 2023 - INFO  - Start to restore the test environment.
+ clear_env
+ cd /root/mugen/testcases/cli-test/osc
+ rm -rf home:test666:branches:openEuler:Mainline /root/.oscrc
+ DNF_REMOVE
+ node=1
+ pkg_list=
+ mode=0
+ [[ -z /tmp/tmpjg5lurb8 ]]
+ '[' 0 -ne 0 ']'
+ '[' 1 == 0 ']'
+ python3 /root/mugen/libs/locallibs/rpm_manage.py remove --node 1 --pkgs '' --tempfile /tmp/tmpjg5lurb8
+ '[' 0 -ne 0 ']'
+ LOG_INFO 'End to restore the test environment.'
+ message='End to restore the test environment.'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level info --message 'End to restore the test environment.'
Thu May 25 17:02:30 2023 - INFO  - End to restore the test environment.
