+ source /root/mugen/libs/locallibs/common_lib.sh
++ python3 --version
++ '[' 0 -eq 0 ']'
++ source /root/mugen/libs/locallibs/common_lib_python.sh
+ main
++ type -t post_test
+ '[' -n '' ']'
+ trap POST_TEST_DEFAULT EXIT INT HUP TERM
+ rpm -qa
+ grep expect
++ type -t config_params
+ '[' -n '' ']'
++ type -t pre_test
+ '[' -n '' ']'
++ type -t run_test
+ '[' -n function ']'
+ run_test
+ modinfo lpfc
+ grep lpfc
filename:       /lib/modules/6.1.19-7.0.0.17.oe2303.x86_64/kernel/drivers/scsi/lpfc/lpfc.ko.xz
name:           lpfc
parm:           lpfc_debugfs_enable:Enable debugfs services (int)
parm:           lpfc_debugfs_max_disc_trc:Set debugfs discovery trace depth (int)
parm:           lpfc_debugfs_max_slow_ring_trc:Set debugfs slow ring trace depth (int)
parm:           lpfc_debugfs_max_nvmeio_trc:Set debugfs NVME IO trace depth (int)
parm:           lpfc_debugfs_mask_disc_trc:Set debugfs discovery trace mask (int)
parm:           lpfc_enable_nvmet:Enable HBA port(s) WWPN as a NVME Target (array of ullong)
parm:           lpfc_poll:FCP ring polling mode control: 0 - none, 1 - poll with interrupts enabled 3 - poll and disable FCP ring interrupts (int)
parm:           lpfc_no_hba_reset:WWPN of HBAs that should not be reset (array of ulong)
parm:           lpfc_sli_mode:SLI mode selector: 3 - select SLI-3 (uint)
parm:           lpfc_enable_npiv:Enable NPIV functionality (uint)
parm:           lpfc_fcf_failover_policy:FCF Fast failover=1 Priority failover=2 (uint)
parm:           lpfc_fcp_wait_abts_rsp:Wait for FCP ABTS completion (uint)
parm:           lpfc_enable_rrq:Enable RRQ functionality (uint)
parm:           lpfc_suppress_link_up:Suppress Link Up at initialization (uint)
parm:           lpfc_nodev_tmo:Seconds driver will hold I/O waiting for a device to come back (int)
parm:           lpfc_devloss_tmo:Seconds driver will hold I/O waiting for a device to come back (int)
parm:           lpfc_suppress_rsp:Enable suppress rsp feature is firmware supports it (uint)
parm:           lpfc_nvmet_mrq:Specify number of RQ pairs for processing NVMET cmds (uint)
parm:           lpfc_nvmet_mrq_post:Specify number of RQ buffers to initially post (uint)
parm:           lpfc_enable_fc4_type:Enable FC4 Protocol support - FCP / NVME (uint)
parm:           lpfc_log_verbose:Verbose logging bit-mask (uint)
parm:           lpfc_enable_da_id:Deregister nameserver objects before LOGO (uint)
parm:           lpfc_lun_queue_depth:Max number of FCP commands we can queue to a specific LUN (uint)
parm:           lpfc_tgt_queue_depth:Set max Target queue depth (uint)
parm:           lpfc_hba_queue_depth:Max number of FCP commands we can queue to a lpfc HBA (uint)
parm:           lpfc_peer_port_login:Allow peer ports on the same physical port to login to each other. (uint)
parm:           lpfc_restrict_login:Restrict virtual ports login to remote initiators. (int)
parm:           lpfc_scan_down:Start scanning for devices from highest ALPA to lowest (uint)
parm:           lpfc_topology:Select Fibre Channel topology (uint)
parm:           lpfc_link_speed:Select link speed (int)
parm:           lpfc_aer_support:Enable PCIe device AER support (uint)
parm:           lpfc_sriov_nr_virtfn:Enable PCIe device SR-IOV virtual fn (uint)
parm:           lpfc_req_fw_upgrade:Enable Linux generic firmware upgrade (int)
parm:           lpfc_force_rscn:Force an RSCN to be sent to all remote NPorts (int)
parm:           lpfc_fcp_imax:Set the maximum number of FCP interrupts per second per HBA (int)
parm:           lpfc_cq_max_proc_limit:Set the maximum number CQEs processed in an iteration of CQ processing (int)
parm:           lpfc_cq_poll_threshold:CQE Processing Threshold to enable Polling (uint)
parm:           lpfc_fcp_cpu_map:Defines how to map CPUs to IRQ vectors per HBA (int)
parm:           lpfc_fcp_class:Select Fibre Channel class of service for FCP sequences (uint)
parm:           lpfc_use_adisc:Use ADISC on rediscovery to authenticate FCP devices (uint)
parm:           lpfc_first_burst_size:First burst size for Targets that support first burst (uint)
parm:           lpfc_nvmet_fb_size:NVME Target mode first burst size in 512B increments. (uint)
parm:           lpfc_nvme_enable_fb:Enable First Burst feature for NVME Initiator. (uint)
parm:           lpfc_max_scsicmpl_time:Use command completion time to control queue depth (uint)
parm:           lpfc_ack0:Enable ACK0 support (uint)
parm:           lpfc_xri_rebalancing:Enable/Disable XRI rebalancing (uint)
parm:           lpfc_fcp_io_sched:Determine scheduling algorithm for issuing commands [0] - Hardware Queue, [1] - Current CPU (uint)
parm:           lpfc_ns_query:Determine algorithm NameServer queries after RSCN [0] - GID_FT, [1] - GID_PT (uint)
parm:           lpfc_fcp2_no_tgt_reset:Determine bus reset behavior for FCP2 devices [0] - issue tgt reset, [1] - no tgt reset (uint)
parm:           lpfc_cr_delay:A count of milliseconds after which an interrupt response is generated (uint)
parm:           lpfc_cr_count:A count of I/O completions after which an interrupt response is generated (uint)
parm:           lpfc_multi_ring_support:Determines number of primary SLI rings to spread IOCB entries across (uint)
parm:           lpfc_multi_ring_rctl:Identifies RCTL for additional ring configuration (uint)
parm:           lpfc_multi_ring_type:Identifies TYPE for additional ring configuration (uint)
parm:           lpfc_enable_SmartSAN:Enable SmartSAN functionality (uint)
parm:           lpfc_fdmi_on:Enable FDMI support (uint)
parm:           lpfc_discovery_threads:Maximum number of ELS commands during discovery (uint)
parm:           lpfc_max_luns:Maximum allowed LUN ID (ullong)
parm:           lpfc_poll_tmo:Milliseconds driver will wait between polling FCP ring (uint)
parm:           lpfc_task_mgmt_tmo:Maximum time to wait for task management commands to complete (uint)
parm:           lpfc_use_msi:Use Message Signaled Interrupts (1) or MSI-X (2), if possible (uint)
parm:           lpfc_nvme_oas:Use OAS bit on NVME IOs (uint)
parm:           lpfc_nvme_embed_cmd:Embed NVME Command in WQE (uint)
parm:           lpfc_fcp_mq_threshold:Set the number of SCSI Queues advertised (uint)
parm:           lpfc_hdw_queue:Set the number of I/O Hardware Queues (uint)
parm:           lpfc_irq_chann:Set number of interrupt vectors to allocate (uint)
parm:           lpfc_enable_hba_reset:Enable HBA resets from the driver. (uint)
parm:           lpfc_enable_hba_heartbeat:Enable HBA Heartbeat. (uint)
parm:           lpfc_EnableXLane:Enable Express Lane Feature. (uint)
parm:           lpfc_XLanePriority:CS_CTL for Express Lane Feature. (uint)
parm:           lpfc_enable_bg:Enable BlockGuard Support (uint)
parm:           lpfc_prot_mask:T10-DIF host protection capabilities mask (uint)
parm:           lpfc_prot_guard:T10-DIF host protection guard type (uint)
parm:           lpfc_delay_discovery:Delay NPort discovery when Clean Address bit is cleared. (uint)
parm:           lpfc_sg_seg_cnt:Max Scatter Gather Segment Count (uint)
parm:           lpfc_enable_mds_diags:Enable MDS Diagnostics (uint)
parm:           lpfc_ras_fwlog_buffsize:Host memory for FW logging (uint)
parm:           lpfc_ras_fwlog_level:Firmware Logging Level (uint)
parm:           lpfc_ras_fwlog_func:Firmware Logging Enabled on Function (uint)
parm:           lpfc_enable_bbcr:Enable BBC Recovery (uint)
parm:           lpfc_fabric_cgn_frequency:Congestion signaling fabric freq (int)
parm:           lpfc_acqe_cgn_frequency:Congestion signaling ACQE freq (int)
parm:           lpfc_use_cgn_signal:Use Congestion signaling if available (int)
parm:           lpfc_enable_dpp:Enable Direct Packet Push (uint)
parm:           lpfc_enable_mi:Enable MI (uint)
parm:           lpfc_max_vmid:Maximum number of VMs supported (uint)
parm:           lpfc_vmid_inactivity_timeout:Inactivity timeout in hours (uint)
parm:           lpfc_vmid_app_header:Enable App Header VMID support (uint)
parm:           lpfc_vmid_priority_tagging:Enable Priority Tagging VMID support (uint)
+ CHECK_RESULT 0 0 0 'Description Module information failed to be displayed'
+ actual_result=0
+ expect_result=0
+ mode=0
+ error_log='Description Module information failed to be displayed'
+ exit_mode=0
+ '[' -z 0 ']'
+ '[' 0 -eq 0 ']'
+ test 0x '!=' 0x
+ return 0
+ lsmod
+ grep lpfc
+ CHECK_RESULT 1 0 1 'Default installation'
+ actual_result=1
+ expect_result=0
+ mode=1
+ error_log='Default installation'
+ exit_mode=0
+ '[' -z 1 ']'
+ '[' 1 -eq 0 ']'
+ test 1x == 0x
+ return 0
+ modprobe lpfc
+ CHECK_RESULT 0 0 0 'Module loading failure'
+ actual_result=0
+ expect_result=0
+ mode=0
+ error_log='Module loading failure'
+ exit_mode=0
+ '[' -z 0 ']'
+ '[' 0 -eq 0 ']'
+ test 0x '!=' 0x
+ return 0
+ lsmod
+ grep lpfc
lpfc                 1273856  0
nvmet_fc               45056  1 lpfc
nvme_fc                53248  1 lpfc
scsi_transport_fc      90112  1 lpfc
+ CHECK_RESULT 0 0 0 'vport_geneve not found'
+ actual_result=0
+ expect_result=0
+ mode=0
+ error_log='vport_geneve not found'
+ exit_mode=0
+ '[' -z 0 ']'
+ '[' 0 -eq 0 ']'
+ test 0x '!=' 0x
+ return 0
+ rmmod lpfc
+ CHECK_RESULT 0 0 0 'vport-geneve remove failure'
+ actual_result=0
+ expect_result=0
+ mode=0
+ error_log='vport-geneve remove failure'
+ exit_mode=0
+ '[' -z 0 ']'
+ '[' 0 -eq 0 ']'
+ test 0x '!=' 0x
+ return 0
+ lsmod
+ grep lpfc
+ CHECK_RESULT 1 0 1 'vport_geneve exist'
+ actual_result=1
+ expect_result=0
+ mode=1
+ error_log='vport_geneve exist'
+ exit_mode=0
+ '[' -z 1 ']'
+ '[' 1 -eq 0 ']'
+ test 1x == 0x
+ return 0
+ dmesg
+ grep vport_geneve
+ grep -Ei 'error|fail'
+ CHECK_RESULT 1 1 0 'error message was reported'
+ actual_result=1
+ expect_result=1
+ mode=0
+ error_log='error message was reported'
+ exit_mode=0
+ '[' -z 1 ']'
+ '[' 0 -eq 0 ']'
+ test 1x '!=' 1x
+ return 0
+ CASE_RESULT 0
+ case_re=0
+ test -z ''
+ test 0 -eq 0
+ LOG_INFO 'succeed to execute the case.'
+ message='succeed to execute the case.'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level info --message 'succeed to execute the case.'
Thu May 25 16:29:58 2023 - INFO  - succeed to execute the case.
+ exec_result=
+ exit 0
+ POST_TEST_DEFAULT
+ LOG_INFO 'oe_test_lpfc.sh post_test'
+ message='oe_test_lpfc.sh post_test'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level info --message 'oe_test_lpfc.sh post_test'
Thu May 25 16:29:58 2023 - INFO  - oe_test_lpfc.sh post_test
