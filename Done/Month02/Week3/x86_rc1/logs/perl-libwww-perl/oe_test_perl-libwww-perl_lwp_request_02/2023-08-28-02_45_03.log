+ source /root/mugen/libs/locallibs/common_lib.sh
++ python3 --version
++ '[' 0 -eq 0 ']'
++ source /root/mugen/libs/locallibs/common_lib_python.sh
+ main
++ type -t post_test
+ '[' -n function ']'
+ trap post_test EXIT INT HUP TERM
+ rpm -qa
+ grep expect
++ type -t config_params
+ '[' -n '' ']'
++ type -t pre_test
+ '[' -n function ']'
+ pre_test
+ LOG_INFO 'Start to prepare the test environment.'
+ message='Start to prepare the test environment.'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level info --message 'Start to prepare the test environment.'
Mon Aug 28 02:45:04 2023 - INFO  - Start to prepare the test environment.
+ DNF_INSTALL perl-libwww-perl
+ pkgs=perl-libwww-perl
+ node=1
+ '[' -z '' ']'
+ tmpfile=
++ python3 /root/mugen/libs/locallibs/rpm_manage.py install --pkgs perl-libwww-perl --node 1 --tempfile ''
+ tmpfile2=/tmp/tmpo32w56e5
+ '[' -z '' ']'
+ tmpfile=/tmp/tmpo32w56e5
+ LOG_INFO 'End to prepare the test environment.'
+ message='End to prepare the test environment.'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level info --message 'End to prepare the test environment.'
Mon Aug 28 02:45:25 2023 - INFO  - End to prepare the test environment.
++ type -t run_test
+ '[' -n function ']'
+ run_test
+ LOG_INFO 'Start to run test.'
+ message='Start to run test.'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level info --message 'Start to run test.'
Mon Aug 28 02:45:25 2023 - INFO  - Start to run test.
+ lwp-request -s http://www.baidu.com
+ grep '200 OK'
200 OK
+ CHECK_RESULT 0 0 0 'Check lwp-request -s failed'
+ actual_result=0
+ expect_result=0
+ mode=0
+ error_log='Check lwp-request -s failed'
+ exit_mode=0
+ '[' -z 0 ']'
+ '[' 0 -eq 0 ']'
+ test 0x '!=' 0x
+ return 0
+ lwp-request -S http://www.baidu.com
+ grep http://www.baidu.com
GET http://www.baidu.com
</script><noscript><meta http-equiv="refresh" content="0; url=http://www.baidu.com/baidu.html?from=noscript" /></noscript></head><body class="cos-pc" ssr="n"><script>
</script><div id="head"><div id="s_top_wrap" class="s-top-wrap s-isindex-wrap "><div class="s-top-nav"></div><div class="s-center-box"></div></div><div id="u"><a class="toindex" href="/">百度首页</a><a href="javascript:;" name="tj_settingicon" class="pf">设置<i class="c-icon c-icon-triangle-down"></i></a><a href="https://passport.baidu.com/v2/?login&tpl=mn&u=http%3A%2F%2Fwww.baidu.com%2F&sms=5" name="tj_login" class="lb" onclick="return false;">登录</a><div class="bdpfmenu"></div></div><div id="s-top-left" class="s-top-left-new s-isindex-wrap"><a href="http://news.baidu.com" target="_blank" class="mnav c-font-normal c-color-t">新闻</a><a href="https://www.hao123.com?src=from_pc" target="_blank" class="mnav c-font-normal c-color-t">hao123</a><a href="http://map.baidu.com" target="_blank" class="mnav c-font-normal c-color-t">地图</a><a href="http://tieba.baidu.com/" target="_blank" class="mnav c-font-normal c-color-t">贴吧</a><a href="https://haokan.baidu.com/?sfrom=baidu-top" target="_blank" class="mnav c-font-normal c-color-t">视频</a><a href="http://image.baidu.com/" target="_blank" class="mnav c-font-normal c-color-t">图片</a><a href="https://pan.baidu.com?from=1026962h" target="_blank" class="mnav c-font-normal c-color-t">网盘</a><div class="mnav s-top-more-btn"><a href="http://www.baidu.com/more/" name="tj_briicon" class="s-bri c-font-normal c-color-t" target="_blank">更多</a><div class='s-top-more' id="s-top-more"><div class='s-top-more-content row-1 clearfix'><a class="img-spacing" href='http://fanyi.baidu.com/' target='_blank' name='tj_fanyi'><img src='https://dss0.bdstatic.com/5aV1bjqh_Q23odCf/static/superman/img/topnav/newfanyi-da0cea8f7e.png'/><div class="s-top-more-title c-font-normal c-color-t">翻译</div></a><a class="img-spacing" href='http://xueshu.baidu.com/' target='_blank' name='tj_xueshu'><img src='https://dss0.bdstatic.com/5aV1bjqh_Q23odCf/static/superman/img/topnav/newxueshuicon-a5314d5c83.png'/><div class="s-top-more-title c-font-normal c-color-t">学术</div></a><a class="" href='https://wenku.baidu.com' target='_blank' name='tj_wenku'><img src='https://dss0.bdstatic.com/5aV1bjqh_Q23odCf/static/superman/img/topnav/newwenku-d8c9b7b0fb.png'/><div class="s-top-more-title c-font-normal c-color-t">文库</div></a></div><div class='s-top-more-content row-2 clearfix'><a class="img-spacing" href='https://baike.baidu.com' target='_blank' name='tj_baike'><img src='https://dss0.bdstatic.com/5aV1bjqh_Q23odCf/static/superman/img/topnav/newbaike-889054f349.png'/><div class="s-top-more-title c-font-normal c-color-t">百科</div></a><a class="img-spacing" href='https://zhidao.baidu.com' target='_blank' name='tj_zhidao'><img src='https://dss0.bdstatic.com/5aV1bjqh_Q23odCf/static/superman/img/topnav/newzhidao-da1cf444b0.png'/><div class="s-top-more-title c-font-normal c-color-t">知道</div></a><a class="" href='https://jiankang.baidu.com/widescreen/home' target='_blank' name='tj_jiankang'><img src='https://dss0.bdstatic.com/5aV1bjqh_Q23odCf/static/superman/img/topnav/newjiankang-f03b804b4b.png'/><div class="s-top-more-title c-font-normal c-color-t">健康</div></a></div><div class='s-top-more-content row-3 clearfix'><a class="img-spacing" href='http://e.baidu.com/ebaidu/home?refer=887' target='_blank' name='tj_yingxiaotuiguang'><img src='https://dss0.bdstatic.com/5aV1bjqh_Q23odCf/static/superman/img/topnav/yingxiaoicon-612169cc36.png'/><div class="s-top-more-title c-font-normal c-color-t">营销推广</div></a><a class="img-spacing" href='https://live.baidu.com/' target='_blank' name='tj_live'><img src='https://dss0.bdstatic.com/5aV1bjqh_Q23odCf/static/superman/img/topnav/newzhibo-a6a0831ecd.png'/><div class="s-top-more-title c-font-normal c-color-t">直播</div></a><a class="" href='http://music.taihe.com' target='_blank' name='tj_mp3'><img src='https://dss0.bdstatic.com/5aV1bjqh_Q23odCf/static/superman/img/topnav/newyinyue-03ecd1e9b9.png'/><div class="s-top-more-title c-font-normal c-color-t">音乐</div></a></div><div class="s-top-tomore"><a class="c-color-gray2 c-font-normal" href='http://www.baidu.com/more/' target='_blank' name='tj_more'>查看全部百度产品 ></a></div></div></div></div><div id="u1" class="s-top-right s-isindex-wrap"><span class="s-top-right-text c-font-normal c-color-t s-top-right-new" id="s-usersetting-top" name="tj_settingicon">设置</span><a class="s-top-login-btn c-btn c-btn-primary c-btn-mini lb" style="position:relative;overflow: visible;" id="s-top-loginbtn"  href="https://passport.baidu.com/v2/?login&tpl=mn&u=http%3A%2F%2Fwww.baidu.com%2F&sms=5" name="tj_login" onclick="return false;">登录</a><div id="s-user-setting-menu" class="s-top-userset-menu c-floating-box c-font-normal "><div class="s-user-setting-pfmenu"></div><a class="s-set-hotsearch set-hide" href="javascript:;">关闭热搜</a><a class="s-set-hotsearch set-show" href="javascript:;">开启热搜</a></div><div class="guide-info "><i class="c-icon guide-icon">&#xe625;</i><span>牛年贺岁，登录设置新春皮肤！</span><i class="c-icon guide-close">&#xe610;</i></div></div><div id="head_wrapper" class="head_wrapper s-isindex-wrap nologin "><div class="s_form s_form_nologin"><div class=" s_form_wrapper"><style>
</script></div><div class="s_tab " id="s_tab"><div class="s_tab_inner"><b class="cur-tab">网页</b><a href="https://www.baidu.com/s?rtt=1&amp;bsst=1&amp;cl=2&amp;tn=news"  wdfield="word"  onmousedown="return c({'fm':'tab','tab':'news'})" sync="true" class="s-tab-item s-tab-news">资讯</a><a href="http://v.baidu.com/v?ct=301989888&amp;rn=20&amp;pn=0&amp;db=0&amp;s=25&amp;ie=utf-8"  wdfield="word"  onmousedown="return c({'fm':'tab','tab':'video'})"  class="s-tab-item s-tab-video">视频</a><a href="http://image.baidu.com/i?tn=baiduimage&amp;ps=1&amp;ct=201326592&amp;lm=-1&amp;cl=2&amp;nc=1&amp;ie=utf-8"  wdfield="word"  onmousedown="return c({'fm':'tab','tab':'pic'})"  class="s-tab-item s-tab-pic">图片</a><a href="http://zhidao.baidu.com/q?ct=17&amp;pn=0&amp;tn=ikaslist&amp;rn=10&amp;fr=wwwt"  wdfield="word"  onmousedown="return c({'fm':'tab','tab':'zhidao'})"  class="s-tab-item s-tab-zhidao">知道</a><a href="http://wenku.baidu.com/search?lm=0&amp;od=0&amp;ie=utf-8"  wdfield="word"  onmousedown="return c({'fm':'tab','tab':'wenku'})"  class="s-tab-item s-tab-wenku">文库</a><a href="http://tieba.baidu.com/f?fr=wwwt"  wdfield="kw"  onmousedown="return c({'fm':'tab','tab':'tieba'})"  class="s-tab-item s-tab-tieba">贴吧</a><a href="https://map.baidu.com/?newmap=1&amp;ie=utf-8&amp;s=s"   onmousedown="return c({'fm':'tab','tab':'map'})"  class="s-tab-item s-tab-map">地图</a><a href="https://b2b.baidu.com/s?fr=wwwt"  wdfield="q"  onmousedown="return c({'fm':'tab','tab':'b2b'})"  class="s-tab-item s-tab-b2b">采购</a><a href="http://www.baidu.com/more/"   onmousedown="return c({'fm':'tab','tab':'more'})"  class="s-tab-item s-tab-more">更多</a></div></div><div id="s_side_wrapper"><div class="side-entry aging-entry"><div class="aging-entry-inner"></div><div class="c-color-text toast">辅助模式</div></div><div id="s_qrcode_nologin" class="qrcode-nologin side-entry"><div class="qrcode-layer icon-mask-wrapper"><img class="icon" src="https://pss.bdstatic.com/static/superman/img/qrcode/qrcode@2x-daf987ad02.png"/><img class="icon-hover" src="https://pss.bdstatic.com/static/superman/img/qrcode/qrcode-hover@2x-f9b106a848.png"/></div><div class="tooltip qrcode-tooltip"><div class="text"><div class="login-text"><i class="c-icon login-icon">&#xe602;</i>百度APP扫码登录</div><div class="login-info">百度一下&nbsp;生活更好</div></div><div id="qrcode-login-wrapper"></div></div></div></div><div id="wrapper_wrapper"></div></div><div class="c-tips-container" id="c-tips-container"></div><script> 
+ CHECK_RESULT 0 0 0 'Check lwp-request -S failed'
+ actual_result=0
+ expect_result=0
+ mode=0
+ error_log='Check lwp-request -S failed'
+ exit_mode=0
+ '[' -z 0 ']'
+ '[' 0 -eq 0 ']'
+ test 0x '!=' 0x
+ return 0
+ lwp-request -e http://www.baidu.com
+ grep '200 OK'
200 OK
+ CHECK_RESULT 0 0 0 'Check lwp-request -e failed'
+ actual_result=0
+ expect_result=0
+ mode=0
+ error_log='Check lwp-request -e failed'
+ exit_mode=0
+ '[' -z 0 ']'
+ '[' 0 -eq 0 ']'
+ test 0x '!=' 0x
+ return 0
+ lwp-request -E http://www.baidu.com
+ grep User-Agent
User-Agent: lwp-request/6.67 libwww-perl/6.67
+ CHECK_RESULT 0 0 0 'Check lwp-request -E failed'
+ actual_result=0
+ expect_result=0
+ mode=0
+ error_log='Check lwp-request -E failed'
+ exit_mode=0
+ '[' -z 0 ']'
+ '[' 0 -eq 0 ']'
+ test 0x '!=' 0x
+ return 0
+ lwp-request -d http://www.baidu.com
+ CHECK_RESULT 0 0 0 'Check lwp-request -d failed'
+ actual_result=0
+ expect_result=0
+ mode=0
+ error_log='Check lwp-request -d failed'
+ exit_mode=0
+ '[' -z 0 ']'
+ '[' 0 -eq 0 ']'
+ test 0x '!=' 0x
+ return 0
+ lwp-request -v
+ grep 'This is lwp-request version'
This is lwp-request version 6.67 (libwww-perl-6.67)
+ CHECK_RESULT 0 0 0 'Check lwp-request -v failed'
+ actual_result=0
+ expect_result=0
+ mode=0
+ error_log='Check lwp-request -v failed'
+ exit_mode=0
+ '[' -z 0 ']'
+ '[' 0 -eq 0 ']'
+ test 0x '!=' 0x
+ return 0
+ lwp-request -h
+ grep 'Usage: lwp-request'
Usage: lwp-request [-options] <url>...
+ CHECK_RESULT 0 0 0 'Check lwp-request -h failed'
+ actual_result=0
+ expect_result=0
+ mode=0
+ error_log='Check lwp-request -h failed'
+ exit_mode=0
+ '[' -z 0 ']'
+ '[' 0 -eq 0 ']'
+ test 0x '!=' 0x
+ return 0
+ LOG_INFO 'End to run test.'
+ message='End to run test.'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level info --message 'End to run test.'
Mon Aug 28 02:45:26 2023 - INFO  - End to run test.
+ CASE_RESULT 0
+ case_re=0
+ test -z ''
+ test 0 -eq 0
+ LOG_INFO 'succeed to execute the case.'
+ message='succeed to execute the case.'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level info --message 'succeed to execute the case.'
Mon Aug 28 02:45:27 2023 - INFO  - succeed to execute the case.
+ exec_result=
+ exit 0
+ post_test
+ LOG_INFO 'Start to restore the test environment.'
+ message='Start to restore the test environment.'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level info --message 'Start to restore the test environment.'
Mon Aug 28 02:45:27 2023 - INFO  - Start to restore the test environment.
+ DNF_REMOVE
+ node=1
+ pkg_list=
+ mode=0
+ [[ -z /tmp/tmpo32w56e5 ]]
+ '[' 0 -ne 0 ']'
+ '[' 1 == 0 ']'
+ python3 /root/mugen/libs/locallibs/rpm_manage.py remove --node 1 --pkgs '' --tempfile /tmp/tmpo32w56e5
+ '[' 0 -ne 0 ']'
+ LOG_INFO 'End to  restore the test environment.'
+ message='End to  restore the test environment.'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level info --message 'End to  restore the test environment.'
Mon Aug 28 02:45:34 2023 - INFO  - End to  restore the test environment.
